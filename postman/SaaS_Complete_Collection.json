{
  "info": {
    "_postman_id": "a8b5e9c7-3f6d-4e2b-9d8c-7f8e6b2a1d3e",
    "name": "SaaS Multi-Tenant API",
    "description": "Collection API pour l'application SaaS multi-tenant pour le secteur de l'assurance",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "12345678"
  },
  "item": [
    {
      "name": "Authentication",
      "description": "Endpoints pour l'authentification et la gestion des sessions",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"password\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            },
            "description": "Authentifie un utilisateur et génère un JWT token"
          },
          "response": []
        },
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"newuser\",\n  \"email\": \"user@example.com\",\n  \"password\": \"password\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"organizationId\": \"{{organizationId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            },
            "description": "Enregistre un nouvel utilisateur"
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "refresh"
              ]
            },
            "description": "Rafraîchit un JWT token expiré"
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "logout"
              ]
            },
            "description": "Déconnecte un utilisateur en révoquant son refresh token"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "description": "Endpoints pour la gestion des utilisateurs",
      "item": [
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"newuser\",\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"organizationId\": \"{{organizationId}}\",\n  \"roleIds\": [\"{{roleId}}\"],\n  \"status\": \"ACTIVE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users"
              ]
            },
            "description": "Crée un nouvel utilisateur"
          },
          "response": []
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{userId}}\",\n  \"username\": \"updateduser\",\n  \"email\": \"updated@example.com\",\n  \"firstName\": \"Updated\",\n  \"lastName\": \"User\",\n  \"organizationId\": \"{{organizationId}}\",\n  \"roleIds\": [\"{{roleId}}\"],\n  \"status\": \"ACTIVE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId}}"
              ]
            },
            "description": "Met à jour un utilisateur existant"
          },
          "response": []
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId}}"
              ]
            },
            "description": "Récupère un utilisateur par son ID"
          },
          "response": []
        },
        {
          "name": "Get User by Username",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/username/{{username}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "username",
                "{{username}}"
              ]
            },
            "description": "Récupère un utilisateur par son nom d'utilisateur"
          },
          "response": []
        },
        {
          "name": "Get User by Email",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/email/{{email}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "email",
                "{{email}}"
              ]
            },
            "description": "Récupère un utilisateur par son email"
          },
          "response": []
        },
        {
          "name": "List All Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users"
              ]
            },
            "description": "Liste tous les utilisateurs"
          },
          "response": []
        },
        {
          "name": "List Users by Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/status/ACTIVE",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "status",
                "ACTIVE"
              ]
            },
            "description": "Liste les utilisateurs par statut (ACTIVE, INACTIVE, LOCKED, PENDING)"
          },
          "response": []
        },
        {
          "name": "List Users by Organization",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/organization/{{organizationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "organization",
                "{{organizationId}}"
              ]
            },
            "description": "Liste les utilisateurs par organisation"
          },
          "response": []
        },
        {
          "name": "Change Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"currentPassword\": \"oldpassword\",\n  \"newPassword\": \"newpassword\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/change-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "change-password"
              ]
            },
            "description": "Change le mot de passe d'un utilisateur"
          },
          "response": []
        },
        {
          "name": "Activate User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/{{userId}}/activate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId}}",
                "activate"
              ]
            },
            "description": "Active un utilisateur"
          },
          "response": []
        },
        {
          "name": "Deactivate User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/{{userId}}/deactivate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId}}",
                "deactivate"
              ]
            },
            "description": "Désactive un utilisateur"
          },
          "response": []
        },
        {
          "name": "Lock User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/{{userId}}/lock",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId}}",
                "lock"
              ]
            },
            "description": "Verrouille un utilisateur"
          },
          "response": []
        },
        {
          "name": "Unlock User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/users/{{userId}}/unlock",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{userId}}",
                "unlock"
              ]
            },
            "description": "Déverrouille un utilisateur"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Roles",
      "description": "Endpoints pour la gestion des rôles",
      "item": [
        {
          "name": "Create Role",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"MANAGER\",\n  \"description\": \"Rôle de gestionnaire\",\n  \"organizationId\": \"{{organizationId}}\",\n  \"permissionIds\": [\"{{permissionId1}}\", \"{{permissionId2}}\"],\n  \"systemDefined\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "roles"
              ]
            },
            "description": "Crée un nouveau rôle"
          },
          "response": []
        },
        {
          "name": "Update Role",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{roleId}}\",\n  \"name\": \"MANAGER_UPDATED\",\n  \"description\": \"Rôle de gestionnaire mis à jour\",\n  \"organizationId\": \"{{organizationId}}\",\n  \"permissionIds\": [\"{{permissionId1}}\", \"{{permissionId2}}\", \"{{permissionId3}}\"],\n  \"systemDefined\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/roles/{{roleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "roles",
                "{{roleId}}"
              ]
            },
            "description": "Met à jour un rôle existant"
          },
          "response": []
        },
        {
          "name": "Get Role by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/roles/{{roleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "roles",
                "{{roleId}}"
              ]
            },
            "description": "Récupère un rôle par son ID"
          },
          "response": []
        },
        {
          "name": "List All Roles",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "roles"
              ]
            },
            "description": "Liste tous les rôles"
          },
          "response": []
        },
        {
          "name": "List Roles by Organization",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/roles/organization/{{organizationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "roles",
                "organization",
                "{{organizationId}}"
              ]
            },
            "description": "Liste les rôles par organisation"
          },
          "response": []
        },
        {
          "name": "List System Roles",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/roles/system?systemDefined=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "roles",
                "system"
              ],
              "query": [
                {
                  "key": "systemDefined",
                  "value": "true"
                }
              ]
            },
            "description": "Liste les rôles système (prédéfinis)"
          },
          "response": []
        },
        {
          "name": "Delete Role",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/roles/{{roleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "roles",
                "{{roleId}}"
              ]
            },
            "description": "Supprime un rôle"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Permissions",
      "description": "Endpoints pour la gestion des permissions",
      "item": [
        {
          "name": "Create Permission",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"USER_CREATE\",\n  \"description\": \"Permission de créer des utilisateurs\",\n  \"resourceType\": \"USER\",\n  \"action\": \"CREATE\",\n  \"systemDefined\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/permissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "permissions"
              ]
            },
            "description": "Crée une nouvelle permission"
          },
          "response": []
        },
        {
          "name": "Update Permission",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{permissionId}}\",\n  \"name\": \"USER_CREATE_UPDATED\",\n  \"description\": \"Permission mise à jour pour créer des utilisateurs\",\n  \"resourceType\": \"USER\",\n  \"action\": \"CREATE\",\n  \"systemDefined\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/permissions/{{permissionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "permissions",
                "{{permissionId}}"
              ]
            },
            "description": "Met à jour une permission existante"
          },
          "response": []
        },
        {
          "name": "Get Permission by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/permissions/{{permissionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "permissions",
                "{{permissionId}}"
              ]
            },
            "description": "Récupère une permission par son ID"
          },
          "response": []
        },
        {
          "name": "List All Permissions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/permissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "permissions"
              ]
            },
            "description": "Liste toutes les permissions"
          },
          "response": []
        },
        {
          "name": "List Permissions by Resource Type",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/permissions/resource-type/USER",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "permissions",
                "resource-type",
                "USER"
              ]
            },
            "description": "Liste les permissions par type de ressource"
          },
          "response": []
        },
        {
          "name": "List System Permissions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/permissions/system?systemDefined=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "permissions",
                "system"
              ],
              "query": [
                {
                  "key": "systemDefined",
                  "value": "true"
                }
              ]
            },
            "description": "Liste les permissions système (prédéfinies)"
          },
          "response": []
        },
        {
          "name": "Delete Permission",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/permissions/{{permissionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "permissions",
                "{{permissionId}}"
              ]
            },
            "description": "Supprime une permission"
          },
          "response": []
        }
      ]
    },
    {
      "name": "API Keys",
      "description": "Endpoints pour la gestion des clés API",
      "item": [
        {
          "name": "Create API Key",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Integration Key\",\n  \"description\": \"Clé API pour l'intégration avec un système externe\",\n  \"organizationId\": \"{{organizationId}}\",\n  \"expiresAt\": \"2025-12-31T23:59:59Z\",\n  \"permissions\": [\"READ\", \"WRITE\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/api-keys",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "api-keys"
              ]
            },
            "description": "Crée une nouvelle clé API"
          },
          "response": []
        },
        {
          "name": "Update API Key",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{apiKeyId}}\",\n  \"name\": \"Integration Key Updated\",\n  \"description\": \"Clé API mise à jour pour l'intégration\",\n  \"organizationId\": \"{{organizationId}}\",\n  \"expiresAt\": \"2026-12-31T23:59:59Z\",\n  \"permissions\": [\"READ\", \"WRITE\", \"DELETE\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/api-keys/{{apiKeyId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "api-keys",
                "{{apiKeyId}}"
              ]
            },
            "description": "Met à jour une clé API existante"
          },
          "response": []
        },
        {
          "name": "Get API Key by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/api-keys/{{apiKeyId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "api-keys",
                "{{apiKeyId}}"
              ]
            },
            "description": "Récupère une clé API par son ID"
          },
          "response": []
        },
        {
          "name": "List All API Keys",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/api-keys",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "api-keys"
              ]
            },
            "description": "Liste toutes les clés API"
          },
          "response": []
        },
        {
          "name": "List API Keys by Organization",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/api-keys/organization/{{organizationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "api-keys",
                "organization",
                "{{organizationId}}"
              ]
            },
            "description": "Liste les clés API par organisation"
          },
          "response": []
        },
        {
          "name": "List API Keys by Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/api-keys/status/ACTIVE",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "api-keys",
                "status",
                "ACTIVE"
              ]
            },
            "description": "Liste les clés API par statut (ACTIVE, EXPIRED, REVOKED)"
          },
          "response": []
        },
        {
          "name": "Revoke API Key",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/api-keys/{{apiKeyId}}/revoke",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "api-keys",
                "{{apiKeyId}}",
                "revoke"
              ]
            },
            "description": "Révoque une clé API"
          },
          "response": []
        },
        {
          "name": "Delete API Key",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/api-keys/{{apiKeyId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "api-keys",
                "{{apiKeyId}}"
              ]
            },
            "description": "Supprime une clé API"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Organizations",
      "description": "Endpoints pour la gestion des organisations",
      "item": [
        {
          "name": "Create Organization",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Assurance XYZ\",\n  \"code\": \"AXYZ\",\n  \"type\": \"INSURER\",\n  \"status\": \"ACTIVE\",\n  \"parentId\": null,\n  \"address\": {\n    \"street\": \"123 Avenue des Assurances\",\n    \"city\": \"Paris\",\n    \"zipCode\": \"75008\",\n    \"country\": \"France\"\n  },\n  \"contact\": {\n    \"email\": \"contact@assurance-xyz.com\",\n    \"phone\": \"+33123456789\",\n    \"website\": \"https://www.assurance-xyz.com\"\n  },\n  \"settings\": {\n    \"timezone\": \"Europe/Paris\",\n    \"locale\": \"fr-FR\",\n    \"dateFormat\": \"dd/MM/yyyy\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/organizations",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "organizations"
              ]
            },
            "description": "Crée une nouvelle organisation"
          },
          "response": []
        },
        {
          "name": "Update Organization",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{organizationId}}\",\n  \"name\": \"Assurance XYZ Updated\",\n  \"code\": \"AXYZ\",\n  \"type\": \"INSURER\",\n  \"status\": \"ACTIVE\",\n  \"parentId\": null,\n  \"address\": {\n    \"street\": \"456 Boulevard des Assurances\",\n    \"city\": \"Paris\",\n    \"zipCode\": \"75008\",\n    \"country\": \"France\"\n  },\n  \"contact\": {\n    \"email\": \"contact@assurance-xyz.com\",\n    \"phone\": \"+33123456789\",\n    \"website\": \"https://www.assurance-xyz.com\"\n  },\n  \"settings\": {\n    \"timezone\": \"Europe/Paris\",\n    \"locale\": \"fr-FR\",\n    \"dateFormat\": \"dd/MM/yyyy\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/organizations/{{organizationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "organizations",
                "{{organizationId}}"
              ]
            },
            "description": "Met à jour une organisation existante"
          },
          "response": []
        },
        {
          "name": "Get Organization by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/organizations/{{organizationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "organizations",
                "{{organizationId}}"
              ]
            },
            "description": "Récupère une organisation par son ID"
          },
          "response": []
        },
        {
          "name": "Get Organization by Code",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/organizations/code/{{organizationCode}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "organizations",
                "code",
                "{{organizationCode}}"
              ]
            },
            "description": "Récupère une organisation par son code"
          },
          "response": []
        },
        {
          "name": "List Organizations",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/organizations",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "organizations"
              ]
            },
            "description": "Liste toutes les organisations"
          },
          "response": []
        },
        {
          "name": "List Organizations with Filters",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/organizations?type=INSURER&status=ACTIVE&parentId={{parentOrgId}}&rootsOnly=false&searchTerm=Assurance&page=0&size=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "organizations"
              ],
              "query": [
                {
                  "key": "type",
                  "value": "INSURER"
                },
                {
                  "key": "status",
                  "value": "ACTIVE"
                },
                {
                  "key": "parentId",
                  "value": "{{parentOrgId}}"
                },
                {
                  "key": "rootsOnly",
                  "value": "false"
                },
                {
                  "key": "searchTerm",
                  "value": "Assurance"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Liste les organisations avec des filtres (type, statut, parent, recherche, etc.)"
          },
          "response": []
        },
        {
          "name": "Get Organization Hierarchy",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/organizations/{{organizationId}}/hierarchy",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "organizations",
                "{{organizationId}}",
                "hierarchy"
              ]
            },
            "description": "Récupère la hiérarchie complète d'une organisation"
          },
          "response": []
        },
        {
          "name": "Delete Organization",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/organizations/{{organizationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "organizations",
                "{{organizationId}}"
              ]
            },
            "description": "Supprime une organisation"
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Extraction automatique du token JWT après connexion",
          "if (pm.response.code === 200 && pm.request.url.toString().includes('/auth/login')) {",
          "    var jsonData = pm.response.json();",
          "    if (jsonData.accessToken) {",
          "        pm.environment.set('accessToken', jsonData.accessToken);",
          "        console.log('Token JWT extrait et enregistré');",
          "    }",
          "    if (jsonData.refreshToken) {",
          "        pm.environment.set('refreshToken', jsonData.refreshToken);",
          "        console.log('Refresh token extrait et enregistré');",
          "    }",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    }
  ]
}